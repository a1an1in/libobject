add attach tests.

Description:
update

Major Changes:
1. add macro for add_definitions of cmake
2. add attach mockery test.
3. fix a few compling warnnings.
4. solve compress test bug.
